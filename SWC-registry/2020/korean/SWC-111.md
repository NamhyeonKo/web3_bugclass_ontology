# 주의: 이 콘텐츠는 더 이상 적극적으로 유지관리되지 않습니다.

SWC 레지스트리의 콘텐츠는 2020년 이후로 철저하게 업데이트되지 않았습니다. 불완전한 것으로 알려져 있으며 오류와 중요한 누락이 포함될 수 있습니다.

보안 검토자를 위한 가이드로 작성된 알려진 스마트 컨트랙트 취약점에 대한 현재 유지관리되는 가이던스는
[EEA EthTrust Security Levels specification](https://entethalliance.org/specs/ethtrust-sl)을 참조하십시오. 최신 릴리스 버전뿐만 아니라
[Editor's draft](https://entethalliance.github.io/eta-registry/security-levels-spec.html)도 제공되며,
이는 사양을 개발하는 그룹의 최신 작업을 나타냅니다.

개발자가 보안을 보장하기 위해 고려해야 할 사항에 대한 현재 유지관리되는 일반 가이던스는
[Smart Contract Security Verification Standard (SCSVS)](https://github.com/ComposableSecurity/SCSVS)를 통해서도 제공됩니다.

# 제목

더 이상 사용되지 않는 Solidity 함수 사용

## 관계

[CWE-477: Use of Obsolete Function](https://cwe.mitre.org/data/definitions/477.html)

## 설명

Solidity의 여러 함수와 연산자는 더 이상 사용되지 않습니다. 이를 사용하면 코드 품질이 저하됩니다. Solidity 컴파일러의 새로운 주요 버전에서는 더 이상 사용되지 않는 함수와 연산자가 부작용 및 컴파일 오류를 초래할 수 있습니다.

## 해결방법

Solidity는 더 이상 사용되지 않는 구성에 대한 대안을 제공합니다. 대부분은 별칭이므로 이전 구성을 교체해도 현재 동작이 중단되지 않습니다. 예를 들어 `sha3`은 `keccak256`으로 교체할 수 있습니다.

| 더 이상 사용되지 않음    | 대안                     |
| ----------------------- | ----------------------- |
| `suicide(address)`      | `selfdestruct(address)` |
| `block.blockhash(uint)` | `blockhash(uint)`       |
| `sha3(...)`             | `keccak256(...)`        |
| `callcode(...)`         | `delegatecall(...)`     |
| `throw`                 | `revert()`              |
| `msg.gas`               | `gasleft`               |
| `constant`              | `view`                  |
| `var`                   | 해당 타입 이름           |

## 참고자료

- [List of global variables and functions, as of Solidity 0.4.25](https://solidity.readthedocs.io/en/v0.4.25/miscellaneous.html#global-variables)
- [Error handling: Assert, Require, Revert and Exceptions](https://solidity.readthedocs.io/en/v0.4.25/control-structures.html#error-handling-assert-require-revert-and-exceptions)
- [View functions](https://solidity.readthedocs.io/en/v0.4.25/contracts.html#view-functions)
- [Untyped declaration is deprecated as of Solidity 0.4.20](https://github.com/ethereum/solidity/releases/tag/v0.4.20)
- [Solidity compiler changelog](https://github.com/ethereum/solidity/releases)

## 샘플

### deprecated_simple.sol

```solidity
pragma solidity ^0.4.24;

contract DeprecatedSimple {

    // Do everything that's deprecated, then commit suicide.

    function useDeprecated() public constant {

        bytes32 blockhash = block.blockhash(0);
        bytes32 hashofhash = sha3(blockhash);

        uint gas = msg.gas;

        if (gas == 0) {
            throw;
        }

        address(this).callcode();

        var a = [1,2,3];

        var (x, y, z) = (false, "test", 0);

        suicide(address(0));
    }

    function () public {}

}

```

### deprecated_simple_fixed.sol

```solidity
pragma solidity ^0.4.24;

contract DeprecatedSimpleFixed {

    function useDeprecatedFixed() public view {

        bytes32 bhash = blockhash(0);
        bytes32 hashofhash = keccak256(bhash);

        uint gas = gasleft();

        if (gas == 0) {
            revert();
        }

        address(this).delegatecall();

        uint8[3] memory a = [1,2,3];

        (bool x, string memory y, uint8 z) = (false, "test", 0);

        selfdestruct(address(0));
    }

    function () external {}

}

```

# 알림: 이 콘텐츠는 더 이상 적극적으로 유지되지 않습니다.

SWC 레지스트리의 내용은 2020년 이후 철저하게 업데이트되지 않았습니다. 불완전하고 오류가 포함되어 있으며 중요한 누락이 있을 수 있습니다.

보안 검토자를 위한 지침으로 작성된 현재 유지되는 스마트 컨트랙트 취약점에 대한 안내는
[EEA EthTrust Security Levels specification](https://entethalliance.org/specs/ethtrust-sl)을 참조하십시오. 최신 릴리스 버전과 함께 사양을 개발하는 그룹의 최신 작업을 나타내는
[Editor's draft](https://entethalliance.github.io/eta-registry/security-levels-spec.html)도 제공됩니다.

현재 유지되고 있는 개발자를 위한 보안 고려사항에 대한 일반적인 지침은
[Smart Contract Security Verification Standard (SCSVS)](https://github.com/ComposableSecurity/SCSVS)를 통해서도 제공됩니다.

# 제목

요구사항 위반

## 관계

[CWE-573: Improper Following of Specification by Caller](https://cwe.mitre.org/data/definitions/573.html)

## 설명

Solidity `require()` 구문은 함수의 외부 입력을 검증하기 위한 것입니다. 대부분의 경우, 이러한 외부 입력은 호출자에 의해 제공되지만, 피호출자에 의해 반환될 수도 있습니다. 전자의 경우를 사전 조건 위반이라고 합니다. 요구사항의 위반은 두 가지 가능한 문제 중 하나를 나타낼 수 있습니다:

1. 외부 입력을 제공한 컨트랙트에 버그가 존재합니다.
1. 요구사항을 표현하는 데 사용된 조건이 너무 강력합니다.

## 해결방법

필요한 논리적 조건이 너무 강력한 경우, 모든 유효한 외부 입력을 허용하도록 약화시켜야 합니다.

그렇지 않은 경우, 버그는 외부 입력을 제공한 컨트랙트에 있어야 하며, 유효하지 않은 입력이 제공되지 않도록 코드를 수정하는 것을 고려해야 합니다.

## 참고자료

- [The use of revert(), assert(), and require() in Solidity, and the new REVERT opcode in the EVM](https://media.consensys.net/when-to-use-revert-assert-and-require-in-solidity-61fb2c0e5a57)

## 샘플

### requirement_simple.sol

```solidity
pragma solidity ^0.4.25;

contract Bar {
    Foo private f = new Foo();
    function doubleBaz() public view returns (int256) {
        return 2 * f.baz(0);
    }
}

contract Foo {
    function baz(int256 x) public pure returns (int256) {
        require(0 < x);
        return 42;
    }
}

```

### requirement_simple_fixed.sol

```solidity
pragma solidity ^0.4.25;

contract Bar {
    Foo private f = new Foo();
    function doubleBaz() public view returns (int256) {
        return 2 * f.baz(1); //Changes the external contract to not hit the overly strong requirement.
    }
}

contract Foo {
    function baz(int256 x) public pure returns (int256) {
        require(0 < x); //You can also fix the contract by changing the input to the uint type and removing the require
        return 42;
    }
}

```
